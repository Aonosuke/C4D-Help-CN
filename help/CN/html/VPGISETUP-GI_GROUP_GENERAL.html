<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<!-- saved from url=(0014)about:internet -->
<html>

	<head>
		<meta http-equiv="content-type" content="text/html;charset=utf-8">
		<meta name="generator" content="WICKIE">
		<title>全局光照设置：常规</title>
		<meta name="FORMATTER" content="wickie">
		<link href="../../files/wickie.css" type="text/css" rel="stylesheet" media="all">
		<script type="text/javascript" src="../../files/versionAppender.js"> </script>
		<script type="text/javascript" src="../../files/linkRewriter.js"> </script> 
		<!--PAGE_ID "32076"-->
		<!--VATER_ID "32075"-->
		<!--REIHENFOLGE "1"-->
		<!--TITLE "全局光照设置：常规"-->
		<!--APPS "16 14 15 10 11"-->
		<!--TYP "GROUP"-->
	</head>

<body bgcolor="#e0e0e0" link="black" vlink="#2a2a2a">


<!--NO_SEARCH_START-->
<span class="link_back"><a href="1001.html" target="_self">CINEMA 4D Prime</a></span> <span class="link_back"><a href="5697.html" target="_self">渲染菜单</a></span> <span class="link_back"><a href="DRENDERSETTINGS.html" target="_self">编辑渲染设置</a></span> <span class="link_back"><a href="32219.html" target="_self">全局光照</a></span> <span class="link_back"><a href="VPGISETUP.html" target="_self">全局光照设置</a></span>

<div class="in-prime-page in-visualize-page in-broadcast-page in-studio-page in-bodypaint3d-page ">  <div class="page_only_body">
<div class="page_only_apps">             Function available in CINEMA 4D Prime, Visualize, Broadcast, Studio & BodyPaint 3D  </div>
<span class="HL_atom"><a href="VPGISETUP.html">全局光照设置</a> </span><p></p><a href="VPGISETUP-GI_GROUP_GENERAL.html" target=""><span class="c4d_group_navi_self">常规</span></a> <a href="VPGISETUP-GI_GROUP_IC2.html" target=""><span class="c4d_group_navi">辐照缓存</span></a> <a href="VPGISETUP-GI_GROUP_IRRADIANCE.html" target=""><span class="c4d_group_navi">辐照缓存（传统）</span></a> <a href="VPGISETUP-GI_GROUP_RADIANCE.html" target=""><span class="c4d_group_navi">辐射贴图</span></a> <a href="VPGISETUP-GI_GROUP_LIGHT_MAPPING.html" target=""><span class="c4d_group_navi">光线映射</span></a> <a href="VPGISETUP-GI_GROUP_CACHES.html" target=""><span class="c4d_group_navi">缓存文件</span></a> <a href="VPGISETUP-GI_GROUP_OPTIONS.html" target=""><span class="c4d_group_navi">选项</span></a><!--NO_SEARCH_END--><p class="c4d_group"><span>常规</span></p><p></p>
<p><RELEASE_150 New GI presets that can be defined for a specific type of Project lighting.></p>
<p><a id="GI_SETUP_DATA_PRESETS" name="GI_SETUP_DATA_PRESETS"></a> <!--INDEX "8","预设","GI_SETUP_DATA_PRESETS"--><span class="c4d_id">预设</span></p>
<p>因为有许多可能的全局光照反弹算法的组合，为给定的工程类型保存一组设置可以有效加快工作流程，因此可以使用预设选项来为指定的工程类型保存全局光照设置。</p>
<p>这时，要知道你的工程是如何设置的。你应该区分两种主要类型：<ul></p>
<p><li> <span class="command">室内空间</span>主要是由少数小光源照亮的：通过窗户摄入的光线以及在一定范围内发射光线的灯光，因此室内空间对于全局光照来说计算比较困难。</li>
<li> <span class="command">室外空间</span>是主要设置在开放环境中的工程。天空从一个巨大的表面上均匀地发射光线，这让全局光照易于计算。</li></ul><p></p>
<p>这些预设应该只作为起始点来使用。这些设置可以在之后进行进行调整来优化渲染质量和渲染时间。更多的细节可以在各个选项的描述中找到。你还可以参考<a href="52453.html" target="">渲染示例</a>，它演示了各种全局光照设置组合的效果。</p>
<p>可以偶尔尝试不常用的算法组合，你可能会发现一些在特定场景中比预设更好的组合。</p>
<p><a id="GI_SETUP_PRESET_CUSTOM" name="GI_SETUP_PRESET_CUSTOM"></a><!--INDEX "10","自定义","GI_SETUP_PRESET_CUSTOM"--><span class="c4d_id_cycle">自定义</span></p>
<p>当修改了一项全局光照设置，这个选项会被激活。</p>
<p><a id="GI_SETUP_PRESET_DEFAULT" name="GI_SETUP_PRESET_DEFAULT"></a><!--INDEX "10","默认","GI_SETUP_PRESET_DEFAULT"--><span class="c4d_id_cycle">默认</span>（辐照缓存）</p>
<p>辐照缓存：漫射深度为1，这是最快的全局光照算法。</p>
<p><a id="hl_1" name="hl_1"></a><!--INDEX "3","室内空间","hl_1"--><p><span class="HL_2">室内空间</span></p>
<p><a id="GI_SETUP_PRESET_INTERIOR_PREVIEW" name="GI_SETUP_PRESET_INTERIOR_PREVIEW"></a><!--INDEX "10","室内 - 预览","GI_SETUP_PRESET_INTERIOR_PREVIEW"--><span class="c4d_id_cycle">室内 - 预览</span></p>
<p>辐照缓存 + 辐射贴图：降低漫射深度的快速预览。</p>
<p><a id="GI_SETUP_PRESET_INTERIOR_PREVIEW_DIFFUSE" name="GI_SETUP_PRESET_INTERIOR_PREVIEW_DIFFUSE"></a><!--INDEX "10","室内 - 预览（高清漫射深度）","GI_SETUP_PRESET_INTERIOR_PREVIEW_DIFFUSE"--><span class="c4d_id_cycle">室内 - 预览（高清漫射深度）</span></p>
<p>辐照缓存 + 光线映射。</p>
<p><a id="GI_SETUP_PRESET_INTERIOR_PREVIEW_AREA" name="GI_SETUP_PRESET_INTERIOR_PREVIEW_AREA"></a><!--INDEX "10","室内 - 预览（小型光源）","GI_SETUP_PRESET_INTERIOR_PREVIEW_AREA"--><span class="c4d_id_cycle">室内 - 预览（小型光源）</span></p>
<p>辐照缓存 + 光线映射。</p>
<p><a id="GI_SETUP_PRESET_INTERIOR_HIGH" name="GI_SETUP_PRESET_INTERIOR_HIGH"></a><!--INDEX "10","室内 - 高品质","GI_SETUP_PRESET_INTERIOR_HIGH"--><span class="c4d_id_cycle">室内 - 高品质</span></p>
<p>辐照缓存 + 辐照缓存。</p>
<p><a id="GI_SETUP_PRESET_INTERIOR_HIGH_DIFFUSE" name="GI_SETUP_PRESET_INTERIOR_HIGH_DIFFUSE"></a><!--INDEX "10","室内 - 高品质（高清漫射深度）","GI_SETUP_PRESET_INTERIOR_HIGH_DIFFUSE"--><span class="c4d_id_cycle">室内 - 高品质（高清漫射深度）</span></p>
<p>辐照缓存 + 光线映射。</p>
<p><a id="GI_SETUP_PRESET_INTERIOR_HIGH_AREA" name="GI_SETUP_PRESET_INTERIOR_HIGH_AREA"></a><!--INDEX "10","室内 - 高品质（小型光源）","GI_SETUP_PRESET_INTERIOR_HIGH_AREA"--><span class="c4d_id_cycle">室内 - 高品质（小型光源）</span></p>
<p>辐照缓存 + 光线映射。</p>
<p>下面的信息对<span class="command">室内</span>预设很重要：<ul></p>
<p><li> <span class="command">预览</span>：该设置的参数会被调低，因此会计算速度很快，适合测试渲染。</li>
<li> <span class="command">高品质</span>：该设置用来进行高质量的渲染，但它可能需要对单独的参数进行增减来达到理想的渲染速度/质量。</li>
<li> <span class="command">高清漫射深度</span>：该设置适用于大量光线反射的场景，它会用无限的“采样深度”来产生非常真实的效果，这时场景会被渲染得更为明亮，暗角也会被照亮。这种效果是与<a href="VPGISETUP-GI_GROUP_LIGHT_MAPPING.html" target="">光线映射</a>一同创建的。</li>
<li> <span class="command">小型光源</span>：工程的光照主要由设定为<a href="32221.html" target="">GI 入口和多边形灯光</a>的小型光源提供。辐照缓存+光线映射与<a href="VPGISETUP-GI_GROUP_GENERAL.html#GI_SETUP_DATA_QMC_AREA_FORCE" target="_self"><span class="text_id">强制每像素</span></a>搭配使用是保障小型光源释放其潜力的最佳设置。</li></ul><p></p>
<p><a id="hl_2" name="hl_2"></a><!--INDEX "3","室外空间","hl_2"--><p><span class="HL_2">室外空间</span></p>
<p><a id="GI_SETUP_PRESET_EXTERIOR_PREVIEW" name="GI_SETUP_PRESET_EXTERIOR_PREVIEW"></a><!--INDEX "10","室外 - 预览","GI_SETUP_PRESET_EXTERIOR_PREVIEW"--><span class="c4d_id_cycle">室外 - 预览</span></p>
<p>辐照缓存 + 辐射贴图：降低漫射深度的快速预览。</p>
<p><a id="GI_SETUP_PRESET_EXTERIOR_SKY" name="GI_SETUP_PRESET_EXTERIOR_SKY"></a><!--INDEX "10","室外 - 物理天空","GI_SETUP_PRESET_EXTERIOR_SKY"--><span class="c4d_id_cycle">室外 - 物理天空</span></p>
<p>辐照缓存 + 准蒙特卡洛。</p>
<p><a id="GI_SETUP_PRESET_EXTERIOR_HDR" name="GI_SETUP_PRESET_EXTERIOR_HDR"></a><!--INDEX "10","室外 - HDR图像","GI_SETUP_PRESET_EXTERIOR_HDR"--><span class="c4d_id_cycle">室外 - HDR图像</span></p>
<p>辐照缓存 + 准蒙特卡洛。</p>
<p>下面的信息对<span class="command">室外</span>预设很重要：<ul></p>
<p><li> <span class="command">预览</span>：该设置的参数会被调低，因此会计算速度很快，适合测试渲染。</li>
<li> <span class="command_value">物理天空</span>与<span class="command_value">HDR 图像</span>的区别：<a href="VPGISETUP-GI_GROUP_GENERAL.html#GI_SETUP_DATA_QMC_SKY_FORCE" target="_self"><span class="text_id">强制每像素</span></a>见后文。指定给天空对象的 HDR 对渲染更准确，它会更加精确地渲染多个投影，只要它们存在于 HDR 图像中（注意，可能需要增加漫射深度值）。</li></ul><p></p>
<p><a id="hl_3" name="hl_3"></a><!--INDEX "3","对象可视化","hl_3"--><p><span class="HL_2">对象可视化</span></p>
<p><a id="GI_SETUP_PRESET_OBJECT_PREVIEW" name="GI_SETUP_PRESET_OBJECT_PREVIEW"></a><!--INDEX "10","对象可视化 - 预览","GI_SETUP_PRESET_OBJECT_PREVIEW"--><span class="c4d_id_cycle">对象可视化 - 预览</span></p>
<p>辐照缓存 + 光线映射。</p>
<p><a id="GI_SETUP_PRESET_OBJECT_HIGH" name="GI_SETUP_PRESET_OBJECT_HIGH"></a><!--INDEX "10","对象可视化 - 高品质","GI_SETUP_PRESET_OBJECT_HIGH"--><span class="c4d_id_cycle">对象可视化 - 高品质</span></p>
<p>辐照缓存 + 辐照缓存。</p>
<p>对象可视化的采光良好，并经常位于构图中心，这意味着它通常只需要少量的光线反射。</p>
<p><a id="hl_4" name="hl_4"></a><!--INDEX "3","物理渲染器的进程式采样","hl_4"--><p><span class="HL_2">物理渲染器的进程式采样</span></p>
<p><a id="GI_SETUP_PRESET_PROGRESSIVE" name="GI_SETUP_PRESET_PROGRESSIVE"></a><!--INDEX "10","进程式采样 - 无预解算","GI_SETUP_PRESET_PROGRESSIVE"--><span class="c4d_id_cycle">进程式采样 - 无预解算</span></p>
<p>准蒙特卡洛 + 准蒙特卡洛。</p>
<p><a id="GI_SETUP_PRESET_PROGRESSIVE_PREPASS" name="GI_SETUP_PRESET_PROGRESSIVE_PREPASS"></a><!--INDEX "10","进程式采样 - 快速完成漫射","GI_SETUP_PRESET_PROGRESSIVE_PREPASS"--><span class="c4d_id_cycle">进程式采样 - 快速完成漫射</span></p>
<p>准蒙特卡洛 + 光线映射。</p>
<p>这两个选项是设计来与物理渲染器的<nobr><span class="text_id_cycle">进程式</span></nobr> <a href="VPXMBSAMPLER-ID_VIDEOPOSTPROPERTIES.html#VP_XMB_RAYTRACING_SAMPLER" target="_self"><span class="text_id">采样器</span></a>设置一起使用的。你可以快速地渲染粗糙的图像，它的质量会渐进式地提高，让你不用长时间地等待图像完成渲染就可以检查整体渲染质量。</p>
<p>你还可以参考使用各种算法组合的<a href="52453.html" target="">渲染示例</a>。</p>
<p></RELEASE_150></p>
<p><RELEASE_150 Selecting GI methods according to primary and secondary proportion.></p>
<p><a id="GI_SETUP_DATA_PRIMARY_METHOD" name="GI_SETUP_DATA_PRIMARY_METHOD"></a> <!--INDEX "8","首次反弹算法","GI_SETUP_DATA_PRIMARY_METHOD"--><span class="c4d_id">首次反弹算法</span><br><a id="GI_SETUP_DATA_SECONDARY_METHOD" name="GI_SETUP_DATA_SECONDARY_METHOD"></a> <!--INDEX "8","二次反弹算法","GI_SETUP_DATA_SECONDARY_METHOD"--><span class="c4d_id">二次反弹算法</span></p>
<p><div class="image_full" style="max-width:1200px"><img  src="../pics/03xxxx/037283.jpg"  ><span class="caption"><span class="command">首次反弹算法</span>只会照亮那些被直接照射的表面，而<span class="command">二次反弹算法</span>会负责反射的光线。</span></div></p>
<p><a id="ANC" name="ANC"></a></p>
<p>CINEMA 4D 中的全局光照分两个部分运作：<ul></p>
<p><li> <span class="command">首次反弹算法</span>计算漫射深度为1的效果，也就是那些由多边形灯光或发光表面（真实灯光或物理天空）发射的光线，不包括反射。在后面的案例中，在有间接反射光的场景中会出现典型的全局光照效果（被白光照射的红球会反射红光）。</li>
<li> <span class="command">二次反弹算法</span>会为那些被多个反射光照亮的表面（它们不需要位于相机视野之内）计算亮度 。</li></ul><p></p>
<p><div class="image_full" style="max-width:1600px"><img  src="../pics/03xxxx/037733.jpg"  ><span class="caption">在这个示例中，左边的图片中只使用了首次反弹算法，而右边的图片使用了首次反弹算法和二次反弹算法；场景中左边是一个多边形灯光，右边则是一个正常的灯光。</span></div></p>
<p>在渲染时，两种算法的结果会被合成来产生整体的全局光照效果。</p>
<p>为什么要分这些算法？因为首次反弹算法对渲染质量来说是最重要的，因此要使用如准蒙特卡洛或辐照缓存这样高质量的算法，当然这也会相应地花费很长时间进行渲染。对于来回反射的光线来说，则可以使用如辐射贴图或光线映射这样质量较低而渲染速度较快的算法。</p>
<p>根据项目的配置，可以使用不同的算法组合，全局光照设置中已经为此设定了各种<span class="command">预设</span>。</p>
<p><p><div class="hint"><span class="HL_hint">提示：<br></span>两个部分的全局光照计算在之前的版本中已经存在：如果将<span class="command">算法</span>设为<span class="command_value">辐照缓存</span>、将<span class="command">采样</span>设置为<span class="command_value">辐射贴图</span>，这就表示<a href="VPGISETUP-GI_GROUP_GENERAL.html#GI_SETUP_DATA_PRIMARY_METHOD" target="_self"><span class="text_id">首次反弹算法</span></a>为<nobr><span class="text_id_cycle">辐照缓存</span></nobr>，而<a href="VPGISETUP-GI_GROUP_GENERAL.html#GI_SETUP_DATA_SECONDARY_METHOD" target="_self"><span class="text_id">二次反弹算法</span></a>为<nobr><span class="text_id_cycle">辐射贴图</span></nobr>。现在有一些新可选算法组合，如<span class="command">二次反弹算法</span>的<span class="command_value">光线映射</span>。</div></p>
<p>查看<a href="32222.html" target="">全局光照渲染的第一步</a>。</p>
<p>还可以参考这些<a href="52453.html" target="">渲染示例</a>，它们使用了各种算法组合进行渲染（例如准蒙特卡洛+光线映射表示<span class="command">首次反弹算法</span>为准蒙特卡洛、<span class="command">二次反弹算法</span>为光线映射）。</p>
<p>接下来是关于各种算法的描述。</p>
<p><a id="hl_5" name="hl_5"></a><!--INDEX "3","首次反弹算法","hl_5"--><p><span class="HL_2">首次反弹算法</span></p>
<p><a id="GI_SETUP_METHOD_QMC" name="GI_SETUP_METHOD_QMC"></a><!--INDEX "10","准蒙特卡洛（QMC）","GI_SETUP_METHOD_QMC"--><span class="c4d_id_cycle">准蒙特卡洛（QMC）</span></p>
<p><span class="command_value">准蒙特卡洛</span>是最准确但也是最慢的算法（当二次反弹算法设为光线映射时，渲染结果也非常优秀，且渲染时间合适）。当使用准蒙特卡洛+准蒙特卡洛时，动画不会出现闪烁（如果没有消除噪点）。更多细节参见<a href="VPGISETUP-GI_GROUP_GENERAL.html#qmc" target="">这里（准蒙特卡洛的工作原理）</a>。</p>
<p><a id="GI_SETUP_METHOD_IC2" name="GI_SETUP_METHOD_IC2"></a><!--INDEX "10","辐照缓存","GI_SETUP_METHOD_IC2"--><span class="c4d_id_cycle">辐照缓存</span></p>
<p><span class="command_value">辐照缓存</span>是一种简化的、快速的算法，它会确定一个给定工程中最重要的区域，计算这些地方的全局光照和插值。如果数值设置太低，动画可能会出现闪烁。更多细节参见<a href="VPGISETUP-GI_GROUP_IC2.html" target="">这里(辐照缓存)</a>。</p>
<p><a id="GI_SETUP_METHOD_IRRADIANCE_CACHE" name="GI_SETUP_METHOD_IRRADIANCE_CACHE"></a><!--INDEX "10","辐照缓存（传统）","GI_SETUP_METHOD_IRRADIANCE_CACHE"--><span class="c4d_id_cycle">辐照缓存（传统）</span></p>
<p>这是 CINEMA R15 之前版本的辐照缓存。保存这一算法是为了让之前版本的工程也可以渲染得到相同的结果。注意，这种算法不能与 Team Render 一同使用。</p>
<p><a id="hl_6" name="hl_6"></a><!--INDEX "3","二次反弹算法","hl_6"--><p><span class="HL_2">二次反弹算法</span></p>
<p><a id="GI_SETUP_METHOD_QMC" name="GI_SETUP_METHOD_QMC"></a><!--INDEX "10","准蒙特卡洛（QMC）","GI_SETUP_METHOD_QMC"--><span class="c4d_id_cycle">准蒙特卡洛（QMC）</span></p>
<p>在室外场景中，将<span class="command">二次反弹算法</span>设为<span class="command_value">准蒙特卡洛</span>，与辐照缓存搭配是最佳的算法组合。而最准确、也最慢的组合是准蒙特卡洛+准蒙特卡洛。</p>
<p><a id="GI_SETUP_METHOD_CACHE" name="GI_SETUP_METHOD_CACHE"></a><!--INDEX "10","辐照缓存","GI_SETUP_METHOD_CACHE"--><span class="c4d_id_cycle">辐照缓存</span></p>
<p>在使用小型光源（被设定为 GI 区域光或 GI 入口）的室内场景中，将<span class="command">二次反弹算法</span>设为<span class="command_value">辐照缓存</span>可以得到不错的渲染结果。在使用准蒙特卡洛+辐照缓存的组合时，请减少<a href="VPGISETUP-GI_GROUP_GENERAL.html#GI_SETUP_DATA_QMC_COUNT_METHOD" target="_self"><span class="text_id">采样</span></a>的数值。在内部，会为辐照缓存使用大量的准蒙特卡洛采样，这会大幅增加渲染时间。</p>
<p><a id="GI_SETUP_METHOD_RADIANCE" name="GI_SETUP_METHOD_RADIANCE"></a><!--INDEX "10","辐射贴图","GI_SETUP_METHOD_RADIANCE"--><span class="c4d_id_cycle">辐射贴图</span></p>
<p>将<span class="command">二次反弹算法</span>设为<span class="command_value">辐射贴图</span>适合快速预览渲染，因为其漫射深度较低（反射光线较少）。更多细节参见<a href="VPGISETUP-GI_GROUP_RADIANCE.html" target="">这里（辐射贴图）</a>。</p>
<p><a id="GI_SETUP_METHOD_LIGHT_MAPPING" name="GI_SETUP_METHOD_LIGHT_MAPPING"></a><!--INDEX "10","光线映射","GI_SETUP_METHOD_LIGHT_MAPPING"--><span class="c4d_id_cycle">光线映射</span></p>
<p>将<span class="command">二次反弹算法</span>设为<span class="command_value">光线映射</span>适合渲染室内空间，这时需要很多光线，这可以由光线映射的大量光线反射快速地产生。更多细节参见<a href="VPGISETUP-GI_GROUP_LIGHT_MAPPING.html" target="">这里（光线映射）</a>。</p>
<p><a id="GI_SETUP_METHOD_NONE" name="GI_SETUP_METHOD_NONE"></a><!--INDEX "10","无","GI_SETUP_METHOD_NONE"--><span class="c4d_id_cycle">无</span></p>
<p>禁用二次全局光照计算，这意味着<span class="command">漫射深度</span>为1（见上文）。</p>
<p></RELEASE_150></p>
<p><a id="GI_SETUP_DATA_PRIMARY_INTENSITY" name="GI_SETUP_DATA_PRIMARY_INTENSITY"></a> <!--INDEX "8","强度","GI_SETUP_DATA_PRIMARY_INTENSITY"--><span class="c4d_id">强度</span> <span class="range">[0.1..10000%]</span><br><a id="GI_SETUP_DATA_SECONDARY_INTENSITY" name="GI_SETUP_DATA_SECONDARY_INTENSITY"></a> <!--INDEX "8","强度","GI_SETUP_DATA_SECONDARY_INTENSITY"--><span class="c4d_id">强度</span> <span class="range">[0.1..10000%]</span></p>
<p><div class="image_full" style="max-width:960px"><img  src="../pics/02xxxx/020139.jpg"  ><span class="caption">从左至右：<span class="command">首次/二次强度</span>依次为：<span class="command_value">100%/100%</span>、<span class="command_value">300%/100%</span>、<span class="command_value">100%/500%</span>。</span></div></p>
<p>根据首次或二次反弹算法，使用这些设置来调整全局光照的亮度（见上文）。</p>
<p><RELEASE_150 Saturation settings that can be defined separately.></p>
<p><a id="GI_SETUP_DATA_PRIMARY_SATURATION" name="GI_SETUP_DATA_PRIMARY_SATURATION"></a> <!--INDEX "8","饱和度","GI_SETUP_DATA_PRIMARY_SATURATION"--><span class="c4d_id">饱和度</span> <span class="range">[0..1000%]</span><br><a id="GI_SETUP_DATA_SECONDARY_SATURATION" name="GI_SETUP_DATA_SECONDARY_SATURATION"></a> <!--INDEX "8","饱和度","GI_SETUP_DATA_SECONDARY_SATURATION"--><span class="c4d_id">饱和度</span> <span class="range">[0..1000%]</span></p>
<p><div class="image_full" style="max-width:1200px"><img  src="../pics/03xxxx/037284.jpg"  ><span class="caption">一个单独的蓝色多边形灯光照亮的场景中，设置不同<span class="command">饱和度</span>的效果。注意中间图像中<span class="command">二次反弹算法</span>是如何发射无色光线的。</span></div></p>
<p>这些设置可以用来单独设定使用在全局光照的<span class="command">首次反弹算法</span>和<span class="command">二次反弹算法</span>中的颜色饱和度。这在物理天空产生的投影太蓝或光线映射产生的效果太过饱和的情况下非常有用。在两种情况中，<span class="command">二次反弹算法</span>的<span class="command_value">饱和度</span>都可以调低。如果其他算法产生的饱和度太低（有时将二次反弹算法为辐照缓存/准蒙特卡洛时会出现这种情况），则可以增加<span class="command_value">饱和度</span>。</p>
<p>注意，如果<span class="command">首次反弹算法</span>的<span class="command_value">饱和度</span>设为<span class="command_value">0%</span>，则<span class="command">二次反弹算法</span>中不会出现颜色。</p>
<p>对<a href="VPGISETUP-GI_GROUP_RADIANCE.html" target="">辐射贴图</a>而言，<span class="command">二次反弹算法</span>的饱和度只会影响真实区域光（而不包含多边形灯光）以及物理天空（它通过太阳光来提供真实光源）。</p>
<p>颜色饱和度还可以对材质进行修改（参见<a href="MMATERIAL-ID_MATERIALGROUP_ILLUMINATION.html#MATERIAL_GLOBALILLUM_GENERATE_SATURATION" target="_self"><span class="text_id">饱和度</span></a>）。这些参数都是全局的，会对整个工程产生影响。</p>
<p></RELEASE_150></p>
<p><a id="GI_SETUP_DATA_DIFFUSE_DEPTH" name="GI_SETUP_DATA_DIFFUSE_DEPTH"></a> <!--INDEX "8","漫射深度","GI_SETUP_DATA_DIFFUSE_DEPTH"--><span class="c4d_id">漫射深度</span> <span class="range">[2..8]</span></p>
<p><div class="image_full" style="max-width:962px"><img  src="../pics/02xxxx/020138.jpg"  ><span class="caption">增加漫射深度可以提高渲染的真实效果。注意，如果<span class="command">漫射深度</span>设为<span class="command_value">1</span>（即禁用二次反弹算法），没有灯光会到达墙壁后面。</span></div></p>
<p>漫射深度（只有在二次反弹算法设为<span class="command_value">辐照缓存</span>或者<span class="command_value">准蒙特卡洛</span>）决定了光线可以被反射的频率（请注意多边形灯光和真实灯光之间的区别，参见<a href="VPGISETUP-GI_GROUP_GENERAL.html#anc" target="">这里</a>）。更高的漫射深度会相应地，不过也是适度地增加渲染时间（漫射深度为<span class="command_value">1</span>和<span class="command_value">2</span>之间的区别要比<span class="command_value">2</span>和<span class="command_value">8</span>之间的区别大得多，这与之前的全局光照版本完全不同），但是光线的散布会更加均匀、亮度更高且更真实。但是在一个正常场景中，漫射深度大于3时产生的效果会越来越不明显，而只会增加亮度。</p>
<p>注意，<a href="VPGISETUP-GI_GROUP_GENERAL.html#GI_SETUP_DATA_GAMMA_VALUE" target="">gamma 校正</a>可以在一定程度上用来补偿较低的漫射深度值。</p>
<p>一般来说，高漫射深度可以使用<a href="VPGISETUP-GI_GROUP_LIGHT_MAPPING.html" target="">光线映射</a>来实现。</p>
<p><p><div class="hint"><span class="HL_hint">提示：<br></span>当使用“真实”光源时，即使<span class="command">漫射深度</span>设为<span class="command_value">1</span>（即禁用二次反弹算法）也能实现间接光照效果，因为被这种灯光照亮的对象会被当做发光物。</div></p>
<p><a id="GI_SETUP_DATA_LIGHT_MAPPING_PATH_DEPTH" name="GI_SETUP_DATA_LIGHT_MAPPING_PATH_DEPTH"></a> <!--INDEX "8","最大传递深度","GI_SETUP_DATA_LIGHT_MAPPING_PATH_DEPTH"--><span class="c4d_id">最大传递深度</span> <span class="range">[1..128]</span></p>
<p><div class="image_full" style="max-width:1600px"><img  src="../pics/03xxxx/037285.jpg"  ><span class="caption">左图：最大传递深度 = <span class="command_value">8</span>，右图：<span class="command_value">32</span>。</span></div></p>
<p>当计算光线映射时（参见<a href="VPGISETUP-GI_GROUP_LIGHT_MAPPING.html" target="">光线映射</a>），发射到场景中的视觉采样会使用这里设定的“反弹”数量来进行计算。更高的数值会产生更高亮度和更均匀的光线散布，而不会增加渲染时间。在封闭空间内亮度的增加较少，在户外场景中，视觉采样会快速到达天空，然后不再反射。</p>
<p>提醒：在计算高漫射深度时，光线映射是最快的全局光照算法！</p>
<p><a id="GI_SETUP_DATA_GAMMA_VALUE" name="GI_SETUP_DATA_GAMMA_VALUE"></a> <!--INDEX "8","Gamma","GI_SETUP_DATA_GAMMA_VALUE"--><span class="c4d_id">Gamma</span> <span class="range">[0.1..10]</span></p>
<p><div class="image_full" style="max-width:800px"><img  src="../pics/02xxxx/020140.jpg"  ><span class="caption">图像1-6：不同的 Gamma 值（<span class="command">漫射深度</span>均为<span class="command_value">3</span>）。最为对比，底部图像<span class="command">Gamma</span> = <span class="command_value">1</span>，<span class="command">漫射深度</span> = <span class="command_value">8</span>。</span></div></p>
<p><p><div class="hint"><span class="HL_hint">提示：<br></span>从 CINEMA 4D R12 开始 Gamma 值的重要性有所降低，启用<a href="DDOC-DOCUMENT_GROUP_PROJECTSETTINGS.html#DOCUMENT_LINEARWORKFLOW" target="_self"><span class="text_id">线性工作流程</span></a>选项会默认将新的（新创建的）全局光照场景渲染得更为明亮。</div></p>
<p>这里的 Gamma 值只会影响间接全局光照，它定义了内部渲染的亮度在 RGB 模式下如何显示。简单的说，它定义了从最暗（黑色）到最亮（白色）的渐变方式。</p>
<p>这就可以让很暗的渲染（如低<span class="command">漫射深度</span>的渲染结果）变得明亮。但是请注意，高 Gamma 值会减少对比，让图像整体变“平”（数值设为<span class="command_value">1</span>到<span class="command_value">3</span>时被证明是最有效的；在一些情况下可能会需要更高的数值）。数值低于<span class="command_value">1</span>时会让图像变暗，反之，数值高于<span class="command_value">1</span>时会变亮（参考上面的示例）。</p>
<p><a id="SAMP" name="SAMP"></a></p>
<p><a id="hl_7" name="hl_7"></a><!--INDEX "3","采样","hl_7"--><p><span class="HL_1">采样</span></p>
<p><span class="command">采样</span>标签的设置会影响准蒙特卡洛和辐照缓存作为<span class="command">首次反弹算法</span>时的全局光照次采样（如果这两种算法也被用在<span class="command">二次反弹算法</span>中，那么在这里设定的数值只有部分会被使用）：为了采集环境中的光线，会发送多少采样，以及发送到哪里？别被这些设置吓到了，第一项设置<span class="command">采样</span>是最重要的，而其他参数是用来调节的。</p>
<p>查看下面的图像，它展示了<span class="command">全局光照模式</span><span class="command_value">准蒙特卡洛</span>是如何工作的（<span class="command_value">辐照缓存</span>原理类似，但是不会对每个像素使用<a href="VPGISETUP-GI_GROUP_GENERAL.html#GI_SETUP_DATA_DIFFUSE_DEPTH" target="_self"><span class="text_id">漫射深度</span></a>3）。</p>
<p><a id="IMAGE" name="IMAGE"></a></p>
<p><div class="image_full" style="max-width:1800px"><img  src="../pics/03xxxx/036160.jpg"  ><span class="caption"></span></div></p>
<p>在上图中你可以看到，当来自左下方的采样碰撞到物体时额外的采样是如何产生的（采样会用来采集环境中一个指定区域的颜色和亮度）。如你所见，在漫射深度1与第一个对象的交点处是最混乱的（之后反射光（漫射深度2、3）会逐渐减少对渲染结果的影响）。</p>
<p><ol><br><li> 左图（禁用<span class="command">离散面积采样</span>和<span class="command">离散天空采样</span>）：<br>在第一个接触点，一些采样会以半球的方向发出（这也就是<span class="command">半球采样</span>的含义）。<br>
<li> 中图（启用<span class="command">离散面积采样</span>、禁用<span class="command">离散天空采样</span>）：<br>除了半球采样，一些采样会以 GI 入口/（多边形）区域光的方向发出。<br>
<li> 右图（启用<span class="command">离散面积采样</span>和<span class="command">离散天空采样</span>）：<br>除了半球采样和区域光采样、额外的采样会以天空的方向发出。<br></ol><p></p>
<p>下面描述的采样设置主要定义是否以及会在球体1上产生多少采样。</p>
<p>为了避免过多的术语，请查看下面的图像，它们使用了不同的选项来渲染场景：</p>
<p>一个区域光被放置在房间后方，右边墙上的窗户中可以看到被指定有 HDRI 的天空对象（它可以渲染硬投影）。场景中没有放置 CINEMA 4D 灯光，<span class="command">首次反弹算法</span>为<span class="command_value">准蒙特卡洛</span>（如果使用<span class="command">辐照缓存</span>，则图像中会出现斑点而不是颗粒噪点）。</p>
<p><div class="image_full" style="max-width:1800px"><img  src="../pics/03xxxx/036161.jpg"  ><span class="caption"></span></div></p>
<p> </p>
<p><ol><br><li> 左图（禁用<span class="command">离散面积采样</span>和<span class="command">离散天空采样</span>）：<br>对这个场景来说这不是一个可行的选项方案，渲染图像颗粒早点非常严重（这是碰撞到区域光的随机采样造成的），阴影（如果它们只得注意的话）的噪点甚至更加严重，亮光点随处可见，这是碰撞到（HDRI）天空的太阳的少量随机采样造成的。<br>
<li> 中图（启用<span class="command">离散面积采样</span>、禁用<span class="command">离散天空采样</span>）：<br>一般的颗粒早点已经大量减少，因为额外的采样被发送到区域光（每个摄像机可见的点都会被分析，这让区域光的投影非常明确）。<br>
<li> 右图（启用<span class="command">离散面积采样</span>和<span class="command">离散天空采样</span>）：<br>除了半球采样和区域光采样、额外的采样会以天空的方向发出，这会消除亮光点，因为每个摄像机可见的点都会根据受到天空的影响进行精确地分析（包括它对场景中其他元素的影响）。<br></ol><p></p>
<p>保持离散采样选项启用一般不会出错，只有在一些特殊情况下，你想要故意排除一种采样时可以禁用它。如果场景中没有区域光或天空，渲染时间的差别会很明显。</p>
<p><p><div class="hint"><span class="HL_hint">提示：<br></span>下面描述的设置会应用到<span class="command">首次反弹算法</span>的<span class="command_value">准蒙特卡洛</span>中，它们同样会应用到<span class="command_value">辐照缓存</span>中，但是不会对每个像素点进行采样，而是对每个着色点采样。</div></p>
<p><a id="GI_SETUP_DATA_QMC_COUNT_METHOD" name="GI_SETUP_DATA_QMC_COUNT_METHOD"></a> <!--INDEX "8","采样","GI_SETUP_DATA_QMC_COUNT_METHOD"--><span class="c4d_id">采样</span></p>
<p>你可以通过选择这里的选项来控制<span class="command">精度</span>和<span class="command">采样数量</span>设置。<ul></p>
<p><li> 选择<span class="command_value">自定义采样数量</span>可以让你手动设置<span class="command">采样数量</span></li>
<li> 选择<span class="command_value">自定义精度</span>可以让你手动设置<span class="command">精度</span></li></ul><p></p>
<p>它整合了两种设置采样数的方法：<ul></p>
<p><li> 由一种质量设置（<span class="command_value">低</span>、<span class="command_value">中</span>、<span class="command_value">高</span>、<span class="command_value">精度</span>）自动决定的精度</li>
<li> 由<span class="command">采样数量</span>设置定义的固定数量采样</li></ul><p></p>
<p><a id="GI_SETUP_DATA_QMC_COUNT_THRESHOLD" name="GI_SETUP_DATA_QMC_COUNT_THRESHOLD"></a> <!--INDEX "8","精度","GI_SETUP_DATA_QMC_COUNT_THRESHOLD"--><span class="c4d_id">精度</span> <span class="range">[0..200%]</span></p>
<p>使用这个设置会自动设定一个最佳的采样数量。最优的采样数量取决于工程（在<span class="command">首次反弹算法</span>为<span class="command_value">辐照缓存</span>的情况下则取决于辐照缓存设置）以及设定的<span class="command">精度</span>值。</p>
<p><p><div class="hint"><span class="HL_hint">注意：<br></span>评估会需要花费一些时间，这可以通过设置一个特定的<span class="command">采样数量</span>来进行优化（如果<span class="command">采样</span>设置为<span class="command">自定义采样数量</span>）。要得到采样数量的参考值，打开控制台（主菜单：脚本 | 控制台）然后渲染场景，输入显示的计入自定义<span class="command">采样数量</span>的数值。注意，控制台中显示的全局光照信息可以在设置菜单中启用或禁用（<span class="command">渲染器</span>菜单）。</div></p>
<p><a id="GI_SETUP_DATA_QMC_COUNT" name="GI_SETUP_DATA_QMC_COUNT"></a> <!--INDEX "8","采样数量","GI_SETUP_DATA_QMC_COUNT"--><span class="c4d_id">采样数量</span> <span class="range">[1..16384]</span></p>
<p><div class="image_full" style="max-width:920px"><img  src="../pics/03xxxx/036163.jpg"  ><span class="caption"></span></div></p>
<p>这项设置设定了要使用的固定采样数量。较高的数值会产生较好的渲染质量（对于<span class="command_value">准蒙特卡洛</span>会反映在在颗粒噪点上；对于<span class="command_value">辐照缓存</span>则会减少斑点数量）。根据工程的不同，会使用上千的数值（参见<a href="VPGISETUP-GI_GROUP_IRRADIANCE.html#qq" target="">每个着色点计算的采样数量</a>）。</p>
<p>用来渲染的采样数量也会被用在离散面积采样和离散天空采样中，如果它们没有设置采样数量。</p>
<p><a id="GI_SETUP_DATA_QMC_ENABLED" name="GI_SETUP_DATA_QMC_ENABLED"></a> <!--INDEX "8","半球采样","GI_SETUP_DATA_QMC_ENABLED"--><span class="c4d_id">半球采样</span></p>
<p>正常情况下，应该启用这个选项。禁用这个选项则不会从着色点以半球方向发送采样（也称为“首次采样器”）。通常是不需要禁用这个选项的，但是这么做有助于决定区域光或天空是如何影响场景的（因为漫射深度会减少为<span class="command_value">1</span>）。在这种情况下，应该启用<span class="command">离散面积采样</span>和<span class="command">离散天空采样</span>。</p>
<p><div class="image_full" style="max-width:1174px"><img  src="../pics/03xxxx/036162.jpg"  ><span class="caption">左图中只显示了<span class="command">半球采样</span>的效果，它在中图中被启用，而在右图中被禁用（两个示例中都启用了<span class="command">离散面积采样</span>和<span class="command">离散天空采样</span>）。</span></div></p>
<p>这种采样方法非常适合使用大面积、均匀的区域光的场景（例如阴云密布天空，它不需要接下来描述的采样方法）。</p>
<p><a id="GI_SETUP_DATA_QMC_AREA_ENABLED" name="GI_SETUP_DATA_QMC_AREA_ENABLED"></a> <!--INDEX "8","离散面积采样","GI_SETUP_DATA_QMC_AREA_ENABLED"--><span class="c4d_id">离散面积采样</span></p>
<p><div class="image_full" style="max-width:1238px"><img  src="../pics/03xxxx/036164.jpg"  ><span class="caption">中图禁用了<span class="command">离散面积采样</span>，右图中启用。</span></div></p>
<p>要让这种采样类型工作，<a href="MMATERIAL-ID_MATERIALGROUP_ILLUMINATION.html#MATERIAL_GLOBALILLUM_AREA" target="_self"><span class="text_id">GI 区域光</span></a>（或者<a href="MMATERIAL-ID_MATERIALGROUP_ILLUMINATION.html#MATERIAL_GLOBALILLUM_PORTAL" target="_self"><span class="text_id">GI 入口</span></a>）选项必须在相应材质（光照通道）中启用。</p>
<p>这种采样方法会发送额外的采样到（多边形）区域光，这会强调场景对比，它对全局光照效果有重要的影响。</p>
<p>注意，如果禁用该选项，区域光不会从全局光照计算中省略，这些灯光不会受到注意，并且会被半球采样随机碰撞到（相应地会产生颗粒噪点）。</p>
<p><a id="GI_SETUP_DATA_QMC_AREA_FORCE" name="GI_SETUP_DATA_QMC_AREA_FORCE"></a> <!--INDEX "8","强制每像素","GI_SETUP_DATA_QMC_AREA_FORCE"--><span class="c4d_id">强制每像素</span></p>
<p><div class="image_full" style="max-width:1280px"><img  src="../pics/03xxxx/036165.jpg"  ><span class="caption">左图中禁用了<span class="command">强制每像素</span>，右图中启用。</span></div></p>
<p>这个选项只有在首次反弹算法为<span class="command_value">辐照缓存</span>时才会发挥作用。通常，在创建辐照缓存时，每个灯光都会被计入缓存。但是，这在场景中有小型的明亮区域光的情况下无效，渲染图像中会出现斑点。如果启用了<span class="command">强制每像素</span>选项，区域光的计算会从缓存中分离出来，并单独计算每个像素（如对象表面，但是不包括背景、天空等），就像<span class="command_value">准蒙特卡洛</span>算法默认所做的那样。</p>
<p>这些计算的结果不会保存到辐照缓存，因此对动画的每一帧都要重新计算。</p>
<p><a id="GI_SETUP_DATA_QMC_AREA_CUSTOM" name="GI_SETUP_DATA_QMC_AREA_CUSTOM"></a> <!--INDEX "8","自定义数量","GI_SETUP_DATA_QMC_AREA_CUSTOM"--><span class="c4d_id">自定义数量</span><br><a id="GI_SETUP_DATA_QMC_AREA_COUNT" name="GI_SETUP_DATA_QMC_AREA_COUNT"></a> <!--INDEX "8","采样数量","GI_SETUP_DATA_QMC_AREA_COUNT"--><span class="c4d_id">采样数量</span> <span class="range">[1..16384]</span></p>
<p>使用这些数值可以设置自定义的采样数量。如果禁用<span class="command">自定义数量</span>，会使用与<a href="VPGISETUP-GI_GROUP_GENERAL.html#GI_SETUP_DATA_QMC_COUNT_METHOD" target="_self"><span class="text_id">采样</span></a>设置中设定的采样数量相同的数值。</p>
<p><a id="GI_SETUP_DATA_QMC_SKY_ENABLED" name="GI_SETUP_DATA_QMC_SKY_ENABLED"></a> <!--INDEX "8","离散天空采样","GI_SETUP_DATA_QMC_SKY_ENABLED"--><span class="c4d_id">离散天空采样</span></p>
<p>这种采样模式会将天空纳入计算（如物理天空或设置了 HDRI 纹理的天空对象）。</p>
<p>一个天空贴图会在渲染过程中进行计算，这主要会将额外产生的采样集中在最亮的区域。这意味着有足够对比的 HDRI 纹理可以在局部非常明亮的区域投射阴影，如下图所示。</p>
<p><div class="image_full" style="max-width:1153px"><img  src="../pics/03xxxx/036167.jpg"  ><span class="caption">这里唯一的照明光源只有一个带有 HDRI 纹理的天空对象。注意那些硬阴影（中图禁用了该选项）。</span></div></p>
<p>注意，物理天空的<a href="OSKYSHADER-ID_SKY_GROUP_GENERAL.html#SKY_GENERAL_MERGE_SUN" target="_self"><span class="text_id">合并天空与太阳</span></a>选项确保了天空在内部（包括太阳的效果）像 HDRI 纹理一样进行处理。</p>
<p>如果禁用该选项，天空不会从全局光照计算中省略，天空不会受到注意，并且会被半球采样随机碰撞到（极其明亮的太阳会产生颗粒噪点）。</p>
<p><a id="GI_SETUP_DATA_QMC_SKY_FORCE" name="GI_SETUP_DATA_QMC_SKY_FORCE"></a> <!--INDEX "8","强制每像素","GI_SETUP_DATA_QMC_SKY_FORCE"--><span class="c4d_id">强制每像素</span></p>
<p><div class="image_full" style="max-width:800px"><img  src="../pics/03xxxx/036166.jpg"  ><span class="caption">一个应用了 HDRI 纹理的天空对象位于窗户后面；左图中禁用了<span class="command">强制每像素</span>，右图中启用。</span></div></p>
<p>这个选项只有在首次反弹算法为<span class="command_value">辐照缓存</span>时才会发挥作用。通常，在创建辐照缓存时，天空会被采样并记入缓存。对于明亮的区域（太阳）或小型发光表面，这种算法会受到限制，并会导致渲染结果中出现斑点。</p>
<p>如果启用了<span class="command">强制每像素</span>，通过天空发射的光线的计算会从缓存中分离出来，并单独计算每个像素（如对象表面，但是不包括背景、天空等），就像<span class="command_value">准蒙特卡洛</span>算法默认所做的那样。</p>
<p>这些计算的结果不会保存到辐照缓存，因此对动画的每一帧都要重新计算。</p>
<p><a id="GI_SETUP_DATA_QMC_SKY_CUSTOM" name="GI_SETUP_DATA_QMC_SKY_CUSTOM"></a> <!--INDEX "8","自定义数量","GI_SETUP_DATA_QMC_SKY_CUSTOM"--><span class="c4d_id">自定义数量</span><br><a id="GI_SETUP_DATA_QMC_SKY_COUNT" name="GI_SETUP_DATA_QMC_SKY_COUNT"></a> <!--INDEX "8","采样数量","GI_SETUP_DATA_QMC_SKY_COUNT"--><span class="c4d_id">采样数量</span> <span class="range">[1..16384]</span></p>
<p>使用这些数值可以设置自定义的采样数量。如果禁用<span class="command">自定义数量</span>，会使用与<a href="VPGISETUP-GI_GROUP_GENERAL.html#GI_SETUP_DATA_QMC_COUNT_METHOD" target="_self"><span class="text_id">采样</span></a>设置中设定的采样数量相同的数值。</p>
<p></PAGE_RELEASE_140></p>
<p><a id="QMC" name="QMC"></a></p>
<p><a id="hl_8" name="hl_8"></a><!--INDEX "3","准蒙特卡洛的工作原理","hl_8"--><p><span class="HL_1">准蒙特卡洛的工作原理</span></p>
<p><div class="image_full" style="max-width:897px"><img  src="../pics/02xxxx/020162.jpg"  ><span class="caption">左图：反弹算法为准蒙特卡洛+准蒙特卡洛, 右图为辐照缓存+辐照缓存。注意在准蒙特卡洛渲染中细节级别（投影）的增加。</span></div> </p>
<p>全局光照计算的准蒙特卡洛算法是按照“暴力”原则来运行的。这就是说，对图像中每个（！）对象像素，会以半球形式发射一定数量（可设置）的光线到场景中。这不是一种自适性的过程，因而渲染时间肯定不会减少。</p>
<p>它的优点是它提供了最精确的渲染结果。投影中微小的细节和着色也会被渲染出来，这在使用辐照缓存算法时是无法体现出来的。</p>
<p>使用准蒙特卡洛作为首次反弹算法的缺点：<ul></p>
<p><li> 渲染时间是最长的（比使用辐照缓存要长得多）。而且，由于亮度和颜色是基于有限且随机分布的光线数量来计算的，它们对于每个像素是明确的，因此图像会出现轻微的颗粒噪点。这只能通过增加采样数量来弥补，这反过来又增加了渲染时间。使用<a href="32221.html" target="">多边形灯光/GI 入口</a>（室内场景，主要由穿过窗户的光线照亮）可以明显提高渲染质量（也能节省渲染时间）。</li>
<li> 不会产生缓存（也没有预处理计算）。因此，要在可接受的质量下渲染动画，就需要大量的 CPU 计算能力（如渲染农场，即使用分布式并行集群计算系统进行渲染）。</li></ul><p></p>
<p>

</p>
  </div>  </div>
</body>

</html>