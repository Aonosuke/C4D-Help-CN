<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<!-- saved from url=(0014)about:internet -->
<html>

	<head>
		<meta http-equiv="content-type" content="text/html;charset=utf-8">
		<meta name="generator" content="WICKIE">
		<title>GI Setup: Irradiance Cache (Legacy)</title>
		<meta name="FORMATTER" content="wickie">
		<link href="../../files/wickie.css" type="text/css" rel="stylesheet" media="all">
		<script type="text/javascript" src="../../files/versionAppender.js"> </script>
		<script type="text/javascript" src="../../files/linkRewriter.js"> </script> 
		<!--PAGE_ID "32079"-->
		<!--VATER_ID "32075"-->
		<!--REIHENFOLGE "3"-->
		<!--TITLE "GI Setup: Irradiance Cache (Legacy)"-->
		<!--APPS "16 14 15 10 11"-->
		<!--TYP "GROUP"-->
	</head>

<body bgcolor="#e0e0e0" link="black" vlink="#2a2a2a">


<!--NO_SEARCH_START-->
<span class="link_back"><a href="1001.html" target="_self">CINEMA 4D Prime</a></span> <span class="link_back"><a href="5697.html" target="_self">Render Menu</a></span> <span class="link_back"><a href="DRENDERSETTINGS.html" target="_self">Edit Render Settings</a></span> <span class="link_back"><a href="32219.html" target="_self">Global Illumination</a></span> <span class="link_back"><a href="VPGISETUP.html" target="_self">GI Setup</a></span>

<div class="in-prime-page in-visualize-page in-broadcast-page in-studio-page in-bodypaint3d-page ">  <div class="page_only_body">
<div class="page_only_apps">             Function available in CINEMA 4D Prime, Visualize, Broadcast, Studio & BodyPaint 3D  </div>
<span class="HL_atom"><a href="VPGISETUP.html">GI Setup</a> </span><p></p><a href="VPGISETUP-GI_GROUP_GENERAL.html" target=""><span class="c4d_group_navi">General</span></a> <a href="VPGISETUP-GI_GROUP_IC2.html" target=""><span class="c4d_group_navi">Irradiance Cache</span></a> <a href="VPGISETUP-GI_GROUP_IRRADIANCE.html" target=""><span class="c4d_group_navi_self">Irradiance Cache (Legacy)</span></a> <a href="VPGISETUP-GI_GROUP_RADIANCE.html" target=""><span class="c4d_group_navi">Radiosity Maps</span></a> <a href="VPGISETUP-GI_GROUP_LIGHT_MAPPING.html" target=""><span class="c4d_group_navi">Light Mapping</span></a> <a href="VPGISETUP-GI_GROUP_CACHES.html" target=""><span class="c4d_group_navi">Cache Files</span></a> <a href="VPGISETUP-GI_GROUP_OPTIONS.html" target=""><span class="c4d_group_navi">Options</span></a><!--NO_SEARCH_END--><p class="c4d_group"><span>Irradiance Cache (Legacy)</span></p><p></p>
<p><PAGE_RELEASE_110></p>
<p><p><div class="hint"><span class="HL_hint">Tip:<br></span>The descriptions on this page refer to the old (legacy) Irradiance Cache (prior to Cinema 4D R15), which is only designed for use when loading or rendering older Projects. Using the Irradiance Cache (Legacy) function is generally not recommended. If possible, switch to the <nobr><span class="text_id_cycle">Irradiance Cache (Legacy)</span></nobr>  <a href="VPGISETUP-GI_GROUP_GENERAL.html#GI_SETUP_DATA_PRIMARY_METHOD" target="_self"><span class="text_id">Primary Method</span></a>.</p>
<p>Note also that the old Irradiance Cache does not work with Team Render. Using the old Irradiance Cache with Team Render will result in Cinema 4D automatically switching to the new Irradiance Cache (with correspondingly different results).</div></p>
<p><div class="image_full" style="max-width:1280px"><img  src="../pics/020141.jpg"  ><span class="caption">Left rendered using the Irradiance Cache method (medium), right rendered using the <a href="VPGISETUP-GI_GROUP_GENERAL.html#qmc" target="">QMC</a> method. For each, Diffuse Depth value was set to 3. Render time for the Irradiance Cache method was a fraction of the time required for the QMC method.</span></div></p>
<p>The advantages of the Irradiance Cache method (hereinafter referred to as "IR") of rendering GI are moderate render times combined with a very homogeneous and even dispersion of light. artefacting (e.g., spots) that was common in previous versions of GI no longer occur when common settings are used. Also, flickering areas within an animation are also a thing of the past.</p>
<p>The IR calculation analyses the scene by making several pre-calculations ("pre-passes") in order to determine the most pertinent areas of the scene ("shading points" - the points shown in the pre-passes) so it can ascertain the correct indirect illumination. The brightness values of these shading points will then be saved to the Irradiance Cache as a "Record". This cache can be saved and later reused.</p>
<p>The Irradiance Cache Records will be interpolated for the final rendering in order to "supply" indirect light to the pixels between the shading points.</p>
<p>There are, however, certain disadvantages to using the Irradiance Cache method:</p>
<p>Finer details pertaining to light and shadow can be omitted due to the interpolation between a limited number of shading points. This is where the <a href="" target="">QMC</a> method has an edge. This is why the IR method offers a <a href="VPGISETUP-GI_GROUP_IRRADIANCE.html#GI_SETUP_DATA_IR_DETAILS_ENABLE" target="">Details Enhancement</a> option that combines QMC and IR methods in order to compensate for this disadvantage. The IR method offers numerous additional parameters that let you push its rendering capabilities to the limit for every scene.</p>
<p><a id="QQ" name="QQ"></a></p>
<p><a id="hl_1" name="hl_1"></a><!--INDEX "3","Number of Samples Calculated Per Shading Point","hl_1"--><p><span class="HL_1">Number of Samples Calculated Per Shading Point</span></p>
<p><div class="image_full" style="max-width:586px"><img  src="../pics/020142.jpg"  ><span class="caption">A certain number of samples are beamed into the scene from each shading point.</span></div></p>
<p>In the <span class="command">General</span> tab you can define the number of samples in the Project in order to ascertain the brightness and color ("sample"), interpolate these values and save them to the cache as "Records".</p>
<p>The more samples that are calculated, the more precise the GI calculation will be for that shading point.</p>
<p><div class="image_full" style="max-width:931px"><img  src="../pics/020143.jpg"  ><span class="caption">Increasing number of samples from left to right. All other settings remain the same.</span></div></p>
<p>As you can see in the image above, sample values that are too low result in a grainy rendering, especially in the corners. If you look closely you will see several spots just over the baseboard at the right of the scene. These can be removed using one of these methods:<ul></p>
<p><li> Manually increasing the <span class="command">Sample Count</span> value (values of several thousand can even be entered)</li><li> Increase the smoothing (<span class="command">Smoothing</span> parameter), which, however, will also soften overall details</li></ul><p></p>
<p><a id="hl_2" name="hl_2"></a><!--INDEX "3","Dispersion of Shading Points","hl_2"--><p><span class="HL_1">Dispersion of Shading Points</span></p>
<p><div class="image_full" style="max-width:719px"><img  src="../pics/020144.jpg"  ><span class="caption"></span></div></p>
<p>Increasing shading point densities from left to right. In the example above, the difference is most noticeable in the room corners and shelf shadows. Note also how the shadow density increases from left to right.</p>
<p>The next six parameters are used to define the dispersion of density of the shadow points between which brightness and color are interpolated during rendering. Increased density results in more recognizable details such as shadows (which is, however, also dependent on the <span class="command">Smoothing</span> settings, which can, in turn, cause details to become less visible if set too high).</p>
<p>As you can see in the example above, smooth surfaces with no edges, corners or similar features receive comparatively few shading points whereas "complex" areas in which a lot of shading and lighting take place contain many shading points. This differing dispersion takes place automatically when the default settings are used and is a result of the fact that indirect illumination in corners and at edges changes greatly.</p>
<p><p><div class="hint"><span class="HL_hint">Tip:<br></span>If a rendering turns out to be grainy or have a inhomogeneous dispersion of light ("Noise") you can increase the <a href="VPGISETUP-GI_GROUP_GENERAL.html#GI_SETUP_DATA_QMC_COUNT" target="_self"><span class="text_id">Sample Count</span></a> instead of endlessly optimizing the Records Density.</div></p>
<p><a id="GI_SETUP_DATA_IR_DENSITY_QUALITY" name="GI_SETUP_DATA_IR_DENSITY_QUALITY"></a> <!--INDEX "8","Record Density","GI_SETUP_DATA_IR_DENSITY_QUALITY"--><span class="c4d_id">Record Density</span></p>
<p>This parameter contains a set of predefined parameters that are by default optimized for most uses. Only under special circumstances should you change the option to <span class="command_value">Custom</span> and modify these parameters yourself.</p>
<p><a id="GI_SETUP_QUALITY_CUSTOM" name="GI_SETUP_QUALITY_CUSTOM"></a><!--INDEX "10","Custom","GI_SETUP_QUALITY_CUSTOM"--><span class="c4d_id_cycle">Custom</span></p>
<p>This option will automatically be selected if one of the underlying parameters is modified.</p>
<p><a id="GI_SETUP_QUALITY_PREVIEW" name="GI_SETUP_QUALITY_PREVIEW"></a><!--INDEX "10","Preview","GI_SETUP_QUALITY_PREVIEW"--><span class="c4d_id_cycle">Preview</span></p>
<p>As the name suggests, a preview will be rendered quickly - with correspondingly "poor" values that make a quick rendering possible. These "poor" values will result in many GI details being lost or in faulty rendering. This option is especially useful for creating animation preview renderings.</p>
<p><a id="GI_SETUP_QUALITY_LOW" name="GI_SETUP_QUALITY_LOW"></a><!--INDEX "10","Low","GI_SETUP_QUALITY_LOW"--><span class="c4d_id_cycle">Low</span><br><a id="GI_SETUP_QUALITY_MEDIUM" name="GI_SETUP_QUALITY_MEDIUM"></a><!--INDEX "10","Medium","GI_SETUP_QUALITY_MEDIUM"--><span class="c4d_id_cycle">Medium</span><br><a id="GI_SETUP_QUALITY_HIGH" name="GI_SETUP_QUALITY_HIGH"></a><!--INDEX "10","High","GI_SETUP_QUALITY_HIGH"--><span class="c4d_id_cycle">High</span><br><a id="GI_SETUP_QUALITY_HIGH_DETAILS" name="GI_SETUP_QUALITY_HIGH_DETAILS"></a><!--INDEX "10","High (Details)","GI_SETUP_QUALITY_HIGH_DETAILS"--><span class="c4d_id_cycle">High (Details)</span></p>
<p>These four options are optimized for use with the <a href="VPGISETUP-GI_GROUP_IRRADIANCE.html#GI_SETUP_DATA_IR_INTERPOLATION_METHOD" target="">Least Squares</a> interpolation method and result in differing levels of quality.</p>
<p><a id="GI_SETUP_DATA_IR_DENSITY_RATE_MIN" name="GI_SETUP_DATA_IR_DENSITY_RATE_MIN"></a> <!--INDEX "8","Min Rate","GI_SETUP_DATA_IR_DENSITY_RATE_MIN"--><span class="c4d_id">Min Rate</span> <span class="range">[-8..4]</span><br><a id="GI_SETUP_DATA_IR_DENSITY_RATE_MAX" name="GI_SETUP_DATA_IR_DENSITY_RATE_MAX"></a> <!--INDEX "8","Max Rate","GI_SETUP_DATA_IR_DENSITY_RATE_MAX"--><span class="c4d_id">Max Rate</span> <span class="range">[-8..4]</span></p>
<p>When Cinema 4D creates an Irradiance Cache it initially starts with  a lower image resolution (<span class="command">Min. Rate</span>) and progresses pre-pass-by-pre-pass to the final IR resolution (<span class="command">Max. Rate</span>). A value of <span class="command_value">0</span> results in full resolution (pixel size 1*1), a value of <span class="command_value">-1</span> = pixel size of "2*2", <span class="command_value">-2</span> = "4*4" and so on. The <span class="command">Min Rate</span> value should logically be smaller than the <span class="command">Max Rate</span> value. Positive values can also be applied, which will allow cache Records in the sub-pixel range (can be useful for <a href="MMATERIAL-ID_MATERIALGROUP_DISPLACEMENT.html#MATERIAL_DISPLACEMENT_SUBPOLY" target="">Sub-polygon Displacement</a> if details are lost).</p>
<p>These resolutions apply only to IR calculations. Since the Irradiance Cache can be scaled relatively easily (i.e. lower IR resolution at larger image resolution) good results can often be achieved even when using smaller resolutions. Hence, these two parameters offer great potential for shortening render times, especially for brightly illuminated, low-detail scenes.</p>
<p>Here’s the proof:</p>
<p><div class="image_full" style="max-width:1301px"><img  src="../pics/020145.jpg"  ><span class="caption">As you can see in the images above, the render time is practically cut in half. Although GI artefacting increases, this is usually barely recognizable in brightly lit scenes.</span></div></p>
<p>For example, a setting of -3/0 renders faster than a setting of 0/0 with practically the same result. Equal values (e.g., -3/-3) result in only a single pass at the defined resolution.</p>
<p><a id="GI_SETUP_DATA_IR_DENSITY_RADIUS_MAX" name="GI_SETUP_DATA_IR_DENSITY_RADIUS_MAX"></a> <!--INDEX "8","Radius","GI_SETUP_DATA_IR_DENSITY_RADIUS_MAX"--><span class="c4d_id">Radius</span> <span class="range">[0..100%]</span></p>
<p><div class="image_full" style="max-width:1210px"><img  src="../pics/020146.jpg"  ><span class="caption">A variation of the <span class="command">Radius</span>, <span class="command">Minimum Radius</span> and <span class="command">Density Control</span> parameters. The <span class="command">Use Proximity Correction</span> was disabled (creates additional shading points). In our example the shading points have been colored red for better visibility.</span></div></p>
<p>This parameter defines the maximum distance between shading points. The lower the value the more densely the points will lie together. This parameter primarily affects non-critical regions of the scene such as flat, clear surfaces. The effect of this parameter is also dependent on the <span class="command">Density Control</span> value.</p>
<p><a id="GI_SETUP_DATA_IR_DENSITY_RADIUS_MIN" name="GI_SETUP_DATA_IR_DENSITY_RADIUS_MIN"></a> <!--INDEX "8","Minimum Radius","GI_SETUP_DATA_IR_DENSITY_RADIUS_MIN"--><span class="c4d_id">Minimum Radius</span> <span class="range">[0..100%]</span></p>
<p>This parameter defines the minimum distance between shading points. It primarily affects the critical regions of the scene such as corners, edges, etc. The lower the value the more densely the shading points will lie at these regions. This parameter works proportional to the <span class="command">Radius</span> parameter, i.e., if this value is halved the <span class="command">Minimum Radius</span> value will be halved internally as well.</p>
<p>The <span class="command">Minimum Radius</span> parameter primarily affects areas in which details are important (e.g., subtle shadows). However, too many shading points in these areas can cause problems.</p>
<p>In order to make subtle details visible, use the <a href="VPGISETUP-GI_GROUP_IRRADIANCE.html#GI_SETUP_DATA_IR_DETAILS_ENABLE" target="">Details Enhancement</a> parameters instead.</p>
<p><a id="GI_SETUP_DATA_IR_DENSITY_CONTROL" name="GI_SETUP_DATA_IR_DENSITY_CONTROL"></a> <!--INDEX "8","Density Control","GI_SETUP_DATA_IR_DENSITY_CONTROL"--><span class="c4d_id">Density Control</span> <span class="range">[0..100%]</span></p>
<p>In contrast to the previous two parameters that primarily affect critical or non-critical regions, this parameter affects the shading points globally throughout the scene. The higher the value the greater the density.</p>
<p><a id="GI_SETUP_DATA_IR_DENSITY_PROXIMITY" name="GI_SETUP_DATA_IR_DENSITY_PROXIMITY"></a> <!--INDEX "8","Use Proximity Correction","GI_SETUP_DATA_IR_DENSITY_PROXIMITY"--><span class="c4d_id">Use Proximity Correction</span></p>
<p>This is one of the many GI pre-passes and is responsible for having neighboring shading points "assist" each other in critical regions and pass on information regarding the proximity of geometry. New shading points are created and calculated during this process.</p>
<p>This behavior can be disabled here, which will save some render time but also result in poorer render quality (especially in corner and on edges).This option should be disabled if you are using a <a href="VPGISETUP-GI_GROUP_IRRADIANCE.html#GI_SETUP_DATA_IR_DENSITY_RATE_MAX" target="">Max. Rate</a> value of less than <span class="command_value">0</span>. Otherwise unnecessary calculations will result.</p>
<p><a id="hl_3" name="hl_3"></a><!--INDEX "3","Irradiance Cache Interpolation","hl_3"--><p><span class="HL_1">Irradiance Cache Interpolation</span></p>
<p><div class="image_full" style="max-width:764px"><img  src="../pics/020147.jpg"  ><span class="caption">Left before and right after smoothing. Note how smoothing eliminates subtle details like the shadows of the window bars.</span></div></p>
<p>All previously described parameters dealt with the placement of shading points and their calculation. The indirect illumination was ascertained for the most critical areas of the scene. In the end the point-by-point dispersion of luminosity must be turned into an Area dispersion for rendering. This is what smoothing does by default: For each surface pixel to be rendered, the Irradiance Cache will be examined to find the Record of the pixel in its immediate proximity in order to interpolate the brightness and color values for that pixel. How this interpolation is done (how many Records and in which proximity should be taken into account?) is determined using the parameters described below:</p>
<p><p><div class="hint"><span class="HL_hint">Tip:<br></span>This effective type of interpolation (soft, homogeneous light dispersion) is simultaneously the Irradiance Cache’s greatest weakness: Subtle details of individual Records are "suppressed" by neighboring Records.</p>
<p>This can be compensated for using the following methods:<ul></p>
<p><li> The <a href="VPGISETUP-GI_GROUP_IRRADIANCE.html#GI_SETUP_DATA_IR_DETAILS_ENABLE" target="">Details Enhancement</a> option</li><li> Both <span class="command">Force Per-Pixel</span> (<span class="command">Sampling</span> tab) options for Polygon Lights (objects with an activated "Luminance" material channel), GI Portals and Sky.</li><li> <span class="command_value">QMC</span> <span class="command">GI Mode</span> (without doubt the most render intensive method). This mode also lets you force the <a href="TCOMPOSITING-COMPOSITINGTAG_GROUPGI.html#COMPOSITINGTAG_GIQMC" target="">QMC</a> mode at object level using the Compositing tag.</div></li></ul><p></p>
<p><a id="GI_SETUP_DATA_IR_INTERPOLATION_METHOD" name="GI_SETUP_DATA_IR_INTERPOLATION_METHOD"></a> <!--INDEX "8","Interpolation Method","GI_SETUP_DATA_IR_INTERPOLATION_METHOD"--><span class="c4d_id">Interpolation Method</span></p>
<p><a id="GI_SETUP_INTERPOLATION_LEAST_SQUARES" name="GI_SETUP_INTERPOLATION_LEAST_SQUARES"></a><!--INDEX "10","Least Squares","GI_SETUP_INTERPOLATION_LEAST_SQUARES"--><span class="c4d_id_cycle">Least Squares</span></p>
<p>As is so often the case, this term has its origins in mathematics. What this function essentially does is calculate a curve based on a limited number of points. And this is basically all that happens for smoothing: The Irradiance Cache contains a limited number of Records from which a homogeneous, even dispersion of illumination should be calculated for the entire image.</p>
<p><a id="GI_SETUP_INTERPOLATION_WEIGHTED" name="GI_SETUP_INTERPOLATION_WEIGHTED"></a><!--INDEX "10","Weighted Average","GI_SETUP_INTERPOLATION_WEIGHTED"--><span class="c4d_id_cycle">Weighted Average</span></p>
<p>This method of interpolation works similarly to the <span class="command_value">Least Squares</span> method, only that it only interpolates between values (whereas the <span class="command_value">Least Squares</span> method can also extrapolate, i.e.brighter or darker results than represented by the values defined). So, what is this good for? This method can prevent artefacting when using low-quality GI settings. Furthermore, this method will render faster than the <span class="command_value">Least Squares</span> method. Disadvantage: The dispersion of light is less homogenous than when using the <span class="command_value">Least Squares</span> method.</p>
<p><a id="GI_SETUP_INTERPOLATION_NONE" name="GI_SETUP_INTERPOLATION_NONE"></a><!--INDEX "10","None","GI_SETUP_INTERPOLATION_NONE"--><span class="c4d_id_cycle">None</span></p>
<p>If this option is selected, no smoothing will take place.</p>
<p><a id="GI_SETUP_DATA_IR_INTERPOLATION_SMOOTHING" name="GI_SETUP_DATA_IR_INTERPOLATION_SMOOTHING"></a> <!--INDEX "8","Smoothing","GI_SETUP_DATA_IR_INTERPOLATION_SMOOTHING"--><span class="c4d_id">Smoothing</span></p>
<p>A higher degree of smoothing results more details that will be lost but also in a more homogeneous dispersion of light. Select <span class="command_value">Custom</span> to manually define the <span class="command">Records</span> and <span class="command">Scale</span> values.</p>
<p><a id="GI_SETUP_DATA_IR_INTERPOLATION_MAX_SAMPLES" name="GI_SETUP_DATA_IR_INTERPOLATION_MAX_SAMPLES"></a> <!--INDEX "8","Records","GI_SETUP_DATA_IR_INTERPOLATION_MAX_SAMPLES"--><span class="c4d_id">Records</span> <span class="range">[8..256]</span></p>
<p><div class="image_full" style="max-width:458px"><img  src="../pics/020151.jpg"  ><span class="caption"></span></div></p>
<p>The <span class="command">Scale</span> and <span class="command">Records</span> values limit the number of shading points to be used (the shading points above have been colored red for display purposes).</p>
<p>The <span class="command">Records</span> parameter defines per pixel to be rendered the maximum number of surrounding Records in the Irradiance Cache that should be included in the interpolation of color and brightness for that pixel. If, however, the <span class="command">Scale</span> value is so low that not enough Records can be included in the interpolation, it may result that fewer Records are included.</p>
<p>The lower the parameter value the fewer Records that will be included in the final interpolation and the less homogeneous the rendering will turn out. Higher values will result in more smoothing but also take correspondingly longer to render.</p>
<p><a id="GI_SETUP_DATA_IR_INTERPOLATION_MAX_RADIUS_SCALE" name="GI_SETUP_DATA_IR_INTERPOLATION_MAX_RADIUS_SCALE"></a> <!--INDEX "8","Scale","GI_SETUP_DATA_IR_INTERPOLATION_MAX_RADIUS_SCALE"--><span class="c4d_id">Scale</span> <span class="range">[1.6..8]</span></p>
<p>This parameter serves to spatially limit the Records included in the interpolation process. The larger the value the more Records that will be included and the softer the interpolation will be - and the longer it will take to render. Alternatively the <span class="command">Records</span> parameter can be used for this purpose.</p>
<p><a id="hl_4" name="hl_4"></a><!--INDEX "3","Irradiance Cache Optimization","hl_4"--><p><span class="HL_1">Irradiance Cache Optimization</span></p>
<p><a id="GI_SETUP_DATA_IR_COLOR_QUALITY" name="GI_SETUP_DATA_IR_COLOR_QUALITY"></a> <!--INDEX "8","Cache Refinement","GI_SETUP_DATA_IR_COLOR_QUALITY"--><span class="c4d_id">Cache Refinement</span></p>
<p><div class="image_full" style="max-width:1183px"><img  src="../pics/020152.jpg"  ><span class="caption">The <span class="command">Cache Refinement</span> parameter creates additional shading points in areas with high contrast. Each image contains an insert with the final rendering.</span></div></p>
<p>The previously described parameters all dealt with the placement of shading points based on a scene’s geometric properties. But what if a coarse, dark GI shadow disturbs the entire image?</p>
<p>This is where the <span class="command">Cache Refinement</span> parameter comes in: It compares the Records in the Irradiance Cache and generates additional Records (i.e. shading points) in areas with high contrast (brightness and color) in order to refine and render these areas more precisely.</p>
<p><p><div class="hint"><span class="HL_hint">Tip:<br></span>Note that the most precise GI shadows can be achieved if you enable <a href="VPGISETUP-GI_GROUP_GENERAL.html#GI_SETUP_DATA_QMC_AREA_FORCE" target="_self"><span class="text_id">Force Per-Pixel</span></a> (the same option is available for the Discrete Sky Sampling function in the same tab) in the GI settings of the GI Portal/Polygon Light’s material.</div></p>
<p><p><div class="hint"><span class="HL_hint">Tip:<br></span>Refining the cache can greatly increase the number of Records in the Irradiance Cache, which will not necessarily improve the render quality. Especially when applied in conjunction with incorrect smoothing, this can lead to very grainy results. Hence, only refine the cache if absolutely necessary.</div></p>
<p>Higher <span class="command">Cache Refinement</span> settings will lead to longer render times but no necessarily to better render quality.</p>
<p><a id="GI_SETUP_DATA_IR_COLOR_PASSES" name="GI_SETUP_DATA_IR_COLOR_PASSES"></a> <!--INDEX "8","Passes","GI_SETUP_DATA_IR_COLOR_PASSES"--><span class="c4d_id">Passes</span> <span class="range">[0..4]</span></p>
<p>Color correction can also take up several passes (Multi-Passes). Each new pass includes the results of the previous pass and refines it further by creating additional shading points in critical areas.</p>
<p>Use this setting to define the frequency with the cache should be defined.</p>
<p><a id="GI_SETUP_DATA_IR_COLOR_THRESHOLD" name="GI_SETUP_DATA_IR_COLOR_THRESHOLD"></a> <!--INDEX "8","Color Threshold","GI_SETUP_DATA_IR_COLOR_THRESHOLD"--><span class="c4d_id">Color Threshold</span> <span class="range">[0..100%]</span></p>
<p><div class="image_full" style="max-width:852px"><img  src="../pics/020153.jpg"  ><span class="caption">Top: Prior to cache refinement. Bottom: After cache refinement. Left smaller, right larger <span class="command">Color Threshold</span> value.</span></div></p>
<p>This value defines the degree to which (neighboring) cache Records can deviate from each other with regard to their color (intensity) before additional shading points ("Samples") are added. The lower the value the lower the deviation threshold will be and the more samples that will be added.</p>
<p><p><div class="hint"><span class="HL_hint">Tip:<br></span>The greater the number of samples ((<b>Quality</b>)) the less deviation between neighboring Records and the less cache refinement has to take place.</div></p>
<p><a id="GI_SETUP_DATA_IR_COLOR_CUTOFF" name="GI_SETUP_DATA_IR_COLOR_CUTOFF"></a> <!--INDEX "8","Cutoff","GI_SETUP_DATA_IR_COLOR_CUTOFF"--><span class="c4d_id">Cutoff</span> <span class="range">[0..100%]</span></p>
<p>This values additionally includes differences in intensity. The lower the value the greater the differences between Records have to be for the color correction to apply. A value of <span class="command_value">0</span> will turn cache refinement off.</p>
<p><a id="GI_SETUP_DATA_IR_COLOR_COOEF" name="GI_SETUP_DATA_IR_COLOR_COOEF"></a> <!--INDEX "8","Strength","GI_SETUP_DATA_IR_COLOR_COOEF"--><span class="c4d_id">Strength</span> <span class="range">[0..200%]</span></p>
<p>This parameter is used to adjust the cache refinement’s overall sample density. A value of <span class="command_value">0</span> will turn cache refinement off whereas larger values will increase the number of shading points ("Samples") correspondingly while taking into account <span class="command">Color Threshold</span> and <span class="command">Cutoff</span> values.</p>
<p><a id="GI_SETUP_DATA_IR_DISTANCE_MAP_ENABLED" name="GI_SETUP_DATA_IR_DISTANCE_MAP_ENABLED"></a> <!--INDEX "8","Distance Map","GI_SETUP_DATA_IR_DISTANCE_MAP_ENABLED"--><span class="c4d_id">Distance Map</span></p>
<p><div class="image_full" style="max-width:612px"><img  src="../pics/020155.jpg"  ><span class="caption">The <span class="command">Distance Map</span> prevents light from passing through surfaces.</span></div></p>
<p>Enabling this option generates additional information regarding proximal geometry (any edges nearby?) for each Record in the Irradiance Cache. When values from the Irradiance Cache are used for interpolation when the image is rendered, the <span class="command">Distance Map</span> will be included in the calculations, i.e., interpolation will not occur "around a corner" or through (a thin) wall, which results in artefacting ("light leaks").</p>
<p>Of course the calculation of the Distance Map requires extra render time and this is why this option can be disabled if desired.</p>
<p>Another method of eliminating such artefacting is:</p>
<p><a id="GI_SETUP_DATA_IR_VISIBILITY_CHECK_ENABLED" name="GI_SETUP_DATA_IR_VISIBILITY_CHECK_ENABLED"></a> <!--INDEX "8","Check Record Visibility","GI_SETUP_DATA_IR_VISIBILITY_CHECK_ENABLED"--><span class="c4d_id">Check Record Visibility</span></p>
<p><div class="image_full" style="max-width:540px"><img  src="../pics/020156.jpg"  ><span class="caption">The <span class="command">Check Record Visibility</span> option prevents artefacting on the narrow frame.</span></div></p>
<p>Activating this option will cause cache Records that are not included in the current angle of view of the camera to be disabled for rendering. So, what is this good for? As was the case with the previous parameter, this option also tries to eliminate "light leaks" (render artefacting). This parameter, however, primarily tries to eliminate "light leaks" through thin walls (e.g., single-polygon surfaces) as in our example above. Render time will increase slightly, hence this option should be used after noticing that artefacting actually occurs. This option can even be activated after an Irradiance Cache file has been saved.</p>
<p><a id="hl_5" name="hl_5"></a><!--INDEX "3","Details Enhancement","hl_5"--><p><span class="HL_1">Details Enhancement</span></p>
<p><div class="image_full" style="max-width:800px"><img  src="../pics/020157.jpg"  ><span class="caption">Left with, right without enhanced details. Notice the effect this parameter has on the small geometric details.</span></div></p>
<p>The <span class="command">Details Enhancement</span> parameter contains special options to counteract a characteristic of the Irradiance Cache - the "blurring" (smoothing) of details such as subtle shadows. The enhancement of details uses the QMC Sampling method (see also <a href="VPGISETUP-GI_GROUP_GENERAL.html#qmc" target="">here</a>) in critical areas (for each (!) relevant pixel) like corners, edges, cavities, etc. The Details Enhancement functionality can be seen as a special type of <a href="VPAMBIENTOCCLUSION.html" target="">Ambient Occlusion</a> whereby indirect light is included.</p>
<p>In a nutshell: Subtle geometry details are accentuated.</p>
<p>Note that the internal Irradiance Cache will be calculated differently (the algorithm will be aware of the subsequent detail enhancements and will calculate the critical areas differently) if this option is disabled. However you do it, the Details Enhancement will be calculated separately for each rendered image, i.e., re-using a saved cache will reduce render times.</p>
<p>If you apply <span class="command">Details Enhancement</span> you can lower the other Irradiance Cache settings (especially those pertaining to <span class="command">Record Density</span>).</p>
<p><a id="GI_SETUP_DATA_IR_DETAILS_ENABLE" name="GI_SETUP_DATA_IR_DETAILS_ENABLE"></a> <!--INDEX "8","Details Enhancement","GI_SETUP_DATA_IR_DETAILS_ENABLE"--><span class="c4d_id">Details Enhancement</span></p>
<p>Enables or disables the Details Enhancement parameter.</p>
<p><a id="GI_SETUP_DATA_IR_DETAILS_ADAPTIVE" name="GI_SETUP_DATA_IR_DETAILS_ADAPTIVE"></a> <!--INDEX "8","Adaptive Mode","GI_SETUP_DATA_IR_DETAILS_ADAPTIVE"--><span class="c4d_id">Adaptive Mode</span></p>
<p>Enabling this option can be an advantage in some circumstances, e.g., several small areas are more grainy than others. Additional samples will then be rendered in these areas.</p>
<p><a id="GI_SETUP_DATA_IR_DETAILS_ESTIMATE" name="GI_SETUP_DATA_IR_DETAILS_ESTIMATE"></a> <!--INDEX "8","Estimate Secondary","GI_SETUP_DATA_IR_DETAILS_ESTIMATE"--><span class="c4d_id">Estimate Secondary</span></p>
<p><div class="image_full" style="max-width:680px"><img  src="../pics/020158.jpg"  ><span class="caption">Center, <span class="command">Estimate Secondary</span> disabled, right enabled. A QMC rendering at the left for comparison. Note how the object contact areas were darkened in the image on the right.</span></div></p>
<p>This mode renders faster and offers good results for most applications. However, certain areas will be rendered too dark or too colorful as opposed to a pure QMC rendering (<span class="command">GI Mode</span> <span class="command_value">QMC</span>), which generally doesn’t matter the least bit in most cases. If desired, this behavior can also be disabled (note that grainy renderings can result, in which case the <span class="command">Quality Ratio</span> value should be raised).</p>
<p><a id="GI_SETUP_DATA_IR_DETAILS_RADIUS" name="GI_SETUP_DATA_IR_DETAILS_RADIUS"></a> <!--INDEX "8","Radius","GI_SETUP_DATA_IR_DETAILS_RADIUS"--><span class="c4d_id">Radius</span> <span class="range">[0.05..0.25]</span></p>
<p><div class="image_full" style="max-width:1124px"><img  src="../pics/020159.jpg"  ><span class="caption">Left: Small <span class="command">Radius</span> value. Right: Larger <span class="command">Radius</span> value.</span></div></p>
<p>Use this setting to define the radius within which neighboring objects, corners and edges should be included. Lower values result in only elements in the immediate proximity being "seen", whereas larger values will "see" elements correspondingly far away. Larger values will also result in higher precision and therefore longer render times.</p>
<p><a id="GI_SETUP_DATA_IR_DETAILS_RATIO" name="GI_SETUP_DATA_IR_DETAILS_RATIO"></a> <!--INDEX "8","Quality Ratio","GI_SETUP_DATA_IR_DETAILS_RATIO"--><span class="c4d_id">Quality Ratio</span> <span class="range">[5..1000%]</span></p>
<p>As mentioned at the start, QMC Sampling will take place in critical areas. The <span class="command">Quality Ratio</span> defines how many samples should be used per pixel, which in turn simply defines the graininess of the Details Enhancement. Larger values result in less grainy, softer results but require correspondingly longer render times.</p>
<p><span class="command">Quality Ratio</span> is an autonomous value that works independently of the rest of the IR settings (a value of <span class="command_value">100%</span> is equivalent to 64 samples).</p>
<p><a id="GI_SETUP_DATA_IR_DETAILS_MODE" name="GI_SETUP_DATA_IR_DETAILS_MODE"></a> <!--INDEX "8","Mode","GI_SETUP_DATA_IR_DETAILS_MODE"--><span class="c4d_id">Mode</span></p>
<p><div class="image_full" style="max-width:617px"><img  src="../pics/020160.jpg"  ><span class="caption"></span></div></p>
<p>The options in this drop-down menu are for test purposes only so the effects of the detail enhancement, which are often very subtle, can be made more visible. You can select from the following options:</p>
<p><a id="GI_SETUP_DETAILS_COMBINE" name="GI_SETUP_DETAILS_COMBINE"></a><!--INDEX "10","Combine (Normal)","GI_SETUP_DETAILS_COMBINE"--><span class="c4d_id_cycle">Combine (Normal)</span></p>
<p>Renders accurate results.</p>
<p><a id="GI_SETUP_DETAILS_DETAILS" name="GI_SETUP_DETAILS_DETAILS"></a><!--INDEX "10","Details Only (Preview)","GI_SETUP_DETAILS_DETAILS"--><span class="c4d_id_cycle">Details Only (Preview)</span></p>
<p>Renders detail enhancement without GI. Makes the detail enhancment most visible of all options.</p>
<p><a id="GI_SETUP_DETAILS_GLOBAL" name="GI_SETUP_DETAILS_GLOBAL"></a><!--INDEX "10","Global Only (Preview)","GI_SETUP_DETAILS_GLOBAL"--><span class="c4d_id_cycle">Global Only (Preview)</span></p>
<p>Renders indirect illumination only.</p>
<p>

</p>
  </div>  </div>
</body>

</html>