<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<!-- saved from url=(0014)about:internet -->
<html>

	<head>
		<meta http-equiv="content-type" content="text/html;charset=utf-8">
		<meta name="generator" content="WICKIE">
		<title>GI Setup: Irradiance Cache</title>
		<meta name="FORMATTER" content="wickie">
		<link href="../../files/wickie.css" type="text/css" rel="stylesheet" media="all">
		<script type="text/javascript" src="../../files/versionAppender.js"> </script>
		<script type="text/javascript" src="../../files/linkRewriter.js"> </script> 
		<!--PAGE_ID "52457"-->
		<!--VATER_ID "32075"-->
		<!--REIHENFOLGE "2"-->
		<!--TITLE "GI Setup: Irradiance Cache"-->
		<!--APPS "16 14 15 10 11"-->
		<!--TYP "GROUP"-->
	</head>

<body bgcolor="#e0e0e0" link="black" vlink="#2a2a2a">


<!--NO_SEARCH_START-->
<span class="link_back"><a href="1001.html" target="_self">CINEMA 4D Prime</a></span> <span class="link_back"><a href="5697.html" target="_self">Render Menu</a></span> <span class="link_back"><a href="DRENDERSETTINGS.html" target="_self">Edit Render Settings</a></span> <span class="link_back"><a href="32219.html" target="_self">Global Illumination</a></span> <span class="link_back"><a href="VPGISETUP.html" target="_self">GI Setup</a></span>

<div class="in-prime-page in-visualize-page in-broadcast-page in-studio-page in-bodypaint3d-page ">  <div class="page_only_body">
<div class="page_only_apps">             Function available in CINEMA 4D Prime, Visualize, Broadcast, Studio & BodyPaint 3D  </div>
<span class="HL_atom"><a href="VPGISETUP.html">GI Setup</a> </span><p></p><a href="VPGISETUP-GI_GROUP_GENERAL.html" target=""><span class="c4d_group_navi">General</span></a> <a href="VPGISETUP-GI_GROUP_IC2.html" target=""><span class="c4d_group_navi_self">Irradiance Cache</span></a> <a href="VPGISETUP-GI_GROUP_IRRADIANCE.html" target=""><span class="c4d_group_navi">Irradiance Cache (Legacy)</span></a> <a href="VPGISETUP-GI_GROUP_RADIANCE.html" target=""><span class="c4d_group_navi">Radiosity Maps</span></a> <a href="VPGISETUP-GI_GROUP_LIGHT_MAPPING.html" target=""><span class="c4d_group_navi">Light Mapping</span></a> <a href="VPGISETUP-GI_GROUP_CACHES.html" target=""><span class="c4d_group_navi">Cache Files</span></a> <a href="VPGISETUP-GI_GROUP_OPTIONS.html" target=""><span class="c4d_group_navi">Options</span></a><!--NO_SEARCH_END--><p class="c4d_group"><span>Irradiance Cache</span></p><p></p>
<p><PAGE_RELEASE_150 GI: New, faster and improved Irradiance Cache.></p>
<p><a id="hl_1" name="hl_1"></a><!--INDEX "3","General","hl_1"--><p><span class="HL_1">General</span></p>
<p>A new Irradiance Cache method has been introduced in Cinema 4D R15 (referred to in the following as <span class="command">IR new</span>). This method bears the following advantages compared to other methods (which are still available in the <span class="command_value">Irradiance Cache (Legacy)</span> GI mode):<ul></p>
<p><li> Small details such as contact shadows - i.e., those that are produced where objects meet, in corner edges, etc. - are of much higher quality (with the right settings in the quality of a pure <a href="VPGISETUP-GI_GROUP_GENERAL.html#qmc" target="">QMC</a> rendering).</li></ul><p></p>
<p><div class="image_full" style="max-width:1333px"><img  src="../pics/037311.jpg"  ><span class="caption">The new Irradiance Cache method offers improved rendering of contact shadows (e.g., in the regions marked in the image on the left). Model by Steen Winther.</span></div></p>
<p><ul></p>
<p><li> New algorithms speed up rendering.</li><li> IR new works best with the <a href="52632.html" target="">Team Renderer</a>, which also has improved animation quality (e.g., reduced flickering) and speed (see also <a href="32220.html#giani" target="">GI and Animations</a>).</li></ul><p></p>
<p><p><div class="hint"><span class="HL_hint">Tip:<br></span>All images on this page were rendered using Irradiance Cache, both as <span class="command">Primary</span> and as <span class="command">Secondary</span> method.</div></p>
<p><a id="hl_2" name="hl_2"></a><!--INDEX "3","What is an "Irradiance Cache"?","hl_2"--><p><span class="HL_2">What is an "Irradiance Cache"?</span></p>
<p>Several pre-calculations (’pre-passes’) are made during IR rendering in which the scene is analyzed in order to ascertain the most important indirect lighting regions (the ,shading points’, which are the points displayed during pre-passes; these become very apparent when using lower <a href="VPGISETUP-GI_GROUP_IC2.html#GI_SETUP_DATA_IC2_DENSITY" target="_self"><span class="text_id">Density</span></a> values). See below for more details:</p>
<p><div class="image_full" style="max-width:967px"><img  src="../pics/037312.jpg"  ><span class="caption">Brightness and color values for these shading points.</span></div></p>
<p>The brightness and color values for these shading points will be saved in the Irradiance Cache as so-called ,entries’. This cache can and should be saved (using the <span class="command">Cache Files</span> tab’s settings) so they can be re-used e.g., if the angle of view, camera animation, etc. change. Caches can only be re-used if you render to the Picture Viewer (i.e., not when rendering in the Viewport).</p>
<p>These Irradiance Cache entries will be interpolated during final rendering to supply pixels that lie between shading points with indirect light.</p>
<p><div class="image_full" style="max-width:967px"><img  src="../pics/037313.jpg"  ><span class="caption">… will be interpolated to ensure a homogenous dispersion of light.</span></div></p>
<p>The disadvantages of using the Irradiance Cache method should also be mentioned: When interpolating between the limited number of shading points, details with regard to light and shadow can be lost (however, not nearly as drastically as with the previous version). In this regard, <a href="VPGISETUP-GI_GROUP_GENERAL.html#qmc" target="">QMC</a> still has the advantage.</p>
<p>Remember that the QMC mode always offers the best GI quality with regard to light and shadow dispersion (and unfortunately the slowest). Irradiance Cache always attempts to produce a result as closely as possible to QMC.</p>
<p>Irradiance Cache tends to flicker when used in animations. The IR new method reduces flickering. Generally speaking, Irradiance Cache tends to flicker most if very bright and small <a href="32221.html" target="">Polygon Lights</a> are used. Large, homogenous light sources (e.g., a sky used for illumination from which light is emitted evenly from many sides) is especially IR-friendly.</p>
<p><p><div class="hint"><span class="HL_hint">Tip:<br></span>The following settings can also be found in the new <a href="VPAMBIENTOCCLUSION-VPAMBIENTOCCLUSION_GROUP_CACHE.html" target="">Ambient Occlusion</a>’s settings. The basic principle with which they function is the same (AO, however, only has a Record Density depth of 1).</div></p>
<p>General tip: If you get spotty results, these can most often be eliminated by using a higher <span class="command">Record Density</span> value. Improving the <span class="command">Secondary Method</span>’s settings will help. However, if very poor light map quality is available, for example, there is not much Irradiance Cache can do to remedy this.</p>
<p><a id="GI_SETUP_DATA_IC2_QUALITY" name="GI_SETUP_DATA_IC2_QUALITY"></a> <!--INDEX "8","Record Density","GI_SETUP_DATA_IC2_QUALITY"--><span class="c4d_id">Record Density</span></p>
<p>Most of the following settings will only be used for fine-tuning. For most instances, the <span class="command">Record Density</span> settings <span class="command_value">Low</span>, <span class="command_value">Medium</span> and <span class="command_value">High</span> in conjunction with corresponding values for the settings below will suffice. The <span class="command_value">Preview</span> mode offers a quick preview of the final result. <span class="command_value">Custom</span> will be made available as soon as the Record Density value is changed manually.</p>
<p>Generally speaking, the Record Density value must ony be modified if, for example, a Polygon Light’s (e.g, GI Portals) hard shadow should be shown (and you don’t want to use the slow <a href="VPGISETUP-GI_GROUP_GENERAL.html#GI_SETUP_DATA_QMC_AREA_FORCE" target="_self"><span class="text_id">Force Per-Pixel</span></a>).</p>
<p><a id="GI_SETUP_DATA_IC2_RATE_MIN" name="GI_SETUP_DATA_IC2_RATE_MIN"></a> <!--INDEX "8","Min Rate","GI_SETUP_DATA_IC2_RATE_MIN"--><span class="c4d_id">Min Rate</span> <span class="range">[-8..4]</span><br><a id="GI_SETUP_DATA_IC2_RATE_MAX" name="GI_SETUP_DATA_IC2_RATE_MAX"></a> <!--INDEX "8","Max Rate","GI_SETUP_DATA_IC2_RATE_MAX"--><span class="c4d_id">Max Rate</span> <span class="range">[-8..4]</span></p>
<p>When rendering with Irradiance Cache, several pre-passes will first be calculated (the phase in which squares appear that successively become smaller). During this phase, the dispersion of shading points will be ascertained. This is an adaptive process in which particular emphasis is placed on critical regions: corners, shadow edges, etc. The difference between <span class="command">Min Rate</span> and <span class="command">Max Rate</span> defines the number of pre-passes (see also depiction here: <a href="VPAMBIENTOCCLUSION-VPAMBIENTOCCLUSION_GROUP_CACHE.html#VPAMBIENTOCCLUSION_CACHE_RATE_MIN" target="_self"><span class="text_id">Min Rate</span></a>).</p>
<p>A value of <span class="command_value">0</span> produce a full resolution image (pixel size 1*1) and a value of <span class="command_value">-1</span> will produce a pixel size of 2*2, <span class="command_value">-2</span>=4*4 and so on. Logically, the <span class="command">Min Rate</span> value should always be less than the <span class="command">Max Rate</span> value. Positive values are, however, also possible, which allow sub-pixel cache entries (this can be useful for <a href="MMATERIAL-ID_MATERIALGROUP_DISPLACEMENT.html#MATERIAL_DISPLACEMENT_SUBPOLY" target="">Subpolygon Displacement</a> if details are lost). In the end, these settings are not as important as they were for previous IR. Render times differ only nominally and as long as the values are kept reasonable (<span class="command">Max Rate</span> not less than <span class="command_value">0</span>), the render results will not differ very much, either. If negative values are used for <span class="command">Min Rate</span>, and <span class="command">Max Rate</span> is set to <span class="command_value">0</span>, you’re pretty much on track.</p>
<p><a id="GI_SETUP_DATA_IC2_DENSITY" name="GI_SETUP_DATA_IC2_DENSITY"></a> <!--INDEX "8","Density","GI_SETUP_DATA_IC2_DENSITY"--><span class="c4d_id">Density</span> <span class="range">[10..1000%]</span><br><a id="GI_SETUP_DATA_IC2_DETAILS" name="GI_SETUP_DATA_IC2_DETAILS"></a> <!--INDEX "8","Minimum Spacing","GI_SETUP_DATA_IC2_DETAILS"--><span class="c4d_id">Minimum Spacing</span> <span class="range">[0..1000%]</span><br><a id="GI_SETUP_DATA_IC2_MAX_LIMIT" name="GI_SETUP_DATA_IC2_MAX_LIMIT"></a> <!--INDEX "8","Maximum Spacing","GI_SETUP_DATA_IC2_MAX_LIMIT"--><span class="c4d_id">Maximum Spacing</span> <span class="range">[0..1000%]</span></p>
<p><div class="image_full" style="max-width:1014px"><img  src="../pics/037314.jpg"  ><span class="caption">Increasing <span class="command">Density</span> values from bottom to top.</span></div></p>
<p>The <span class="command">Density</span> value adjusts the general dispersion of shading points. The higher the value, the higher the shading point density.</p>
<p>It makes sense to describe these three settings together because all three work together and, simply put, define the shading point density in critical and non-critical areas:<ul></p>
<p><li> <span class="command">Density</span>: General shading point density in consideration of the following two settings.</li><li> <span class="command">Minimum Spacing</span>: Shading point density in critical areas (e.g., corners, shadows).</li><li> <span class="command">Maximum Spacing</span>: Shading point density in non-critical areas (e.g., plane surfaces).</li></ul><p></p>
<p>The following image shows the effects of the above-mentioned settings:</p>
<p><div class="image_full" style="max-width:2069px"><img  src="../pics/037315.jpg"  ><span class="caption">Different variations of the <span class="command">Density</span>, <span class="command">Minimum Spacing</span> and <span class="command">Maximum Spacing</span> settings.</span></div></p>
<p>How does shading point dispersion affect the final rendered image? For a cleanly rendered image, a high number of shading points are required in critical areas and a halfway decent density in the remaining areas. If you then make sure that each shading point has as many <a href="VPGISETUP-GI_GROUP_GENERAL.html#GI_SETUP_DATA_QMC_COUNT_METHOD" target="_self"><span class="text_id">Samples</span></a> as possible, there’s not much that can go wrong.</p>
<p><a id="GI_SETUP_DATA_IC2_SMOOTHING" name="GI_SETUP_DATA_IC2_SMOOTHING"></a> <!--INDEX "8","Smoothing","GI_SETUP_DATA_IC2_SMOOTHING"--><span class="c4d_id">Smoothing</span> <span class="range">[0..1000%]</span></p>
<p>All previously described settings revolve around the positioning and calculation of shading points. Indirect lighting was ascertained at numerous locations within the Project. This point-by-point dispersion of brightness must be converted to a planar dispersion during rendering. A smoothing algorithm does this in the following way: For each pixel to be rendered for a given object, Irradiance Cache is scanned to find entries in their close proximity to interpolate their brightness and color values.</p>
<p>The higher the <span class="command">Smoothing</span> value, the more shading points that will be used for interpolation to render a given pixel. This setting represents a threshold value that determines whether or not a given cache entry in its proximity will be used. Smaller values generally produce a sharper (and often more spotty) result, whereas larger values will interpolate across larger areas, which results in a more uniform illumination but also means that small details will be lost. Generally speaking, <span class="command">Smoothing</span> is a setting whose value you will rarely have to modify.</p>
<p><a id="GI_SETUP_DATA_IC2_COLOR" name="GI_SETUP_DATA_IC2_COLOR"></a> <!--INDEX "8","Color Refinement","GI_SETUP_DATA_IC2_COLOR"--><span class="c4d_id">Color Refinement</span> <span class="range">[0..1000%]</span></p>
<p><div class="image_full" style="max-width:924px"><img  src="../pics/037316.jpg"  ><span class="caption">Note how the cast shadow is much more defined if a higher <span class="command">Color Refinement</span> value is used.</span></div></p>
<p>Increasing this setting’s value will improve the render quality in regions in which GI lighting changes abruptly (e.g., GI shadows on bright Polygon Lights). What basically happens is that additional shading points will be generated (with a corresponding increase in render time). Important: You should increase the Record Density enough so the dispersion of light is homogenous, otherwise spotty regions will result in regions in which GI lighting changes abruptly.</p>
<p>GI Caustics will also benefit from higher values!</p>
<p><div class="image_full" style="max-width:822px"><img  src="../pics/037317.jpg"  ><span class="caption">A QMC-like Caustics rendering (right), which took a fraction of the time to render.</span></div></p>
<p><a id="GI_SETUP_DATA_IC2_SCALE" name="GI_SETUP_DATA_IC2_SCALE"></a> <!--INDEX "8","Screen Scale","GI_SETUP_DATA_IC2_SCALE"--><span class="c4d_id">Screen Scale</span></p>
<p>With the previous Irradiance Cache, the shading point dispersion was done independently of the size of the rendered image, i.e., the same pre-pass was used for an image 80 x 80 pixels as for an image with a resolution of 1024 x 768. Enabling the <span class="command">Screen Scale</span> option will adjust the shading point density to the image’s resolution. This means that correspondingly more cache entries will be created for an image with a very large resolution than for an image with a very small resolution. Hence, smaller images will render faster and larger correspondingly slower, which also means that more details will be visible.</p>
<p>

</p>
  </div>  </div>
</body>

</html>